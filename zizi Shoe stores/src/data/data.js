let shoe1 = new Shoe (0, "کفش راحتی آدیداس مدل a11", "Adidas", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes1.jpeg","آیاک شوز", 0,"sport shoes", "75%OFF", 500000, "الیاف مصنوعی میکرو پلی اورتان", "ترموپلاستیک پلی اورتان (TPU)", "انعطاف پذیر, کاهش فشار وارده", "ساده, قابل تعویض", "مقاوم در برابر سایش, قابلیت گردش هوا, قابلیت تطبیق با فرم پا", 
    {
        40: 0,
        41:0,
        42:0,
        43:0,
        44:0,
    }
);
ShoeHandler.addData(shoe1);
let shoe2 = new Shoe (1, "کفش راحتی پوما مدل a22", "Puma", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes2.jpeg", "آسیکس شاپ",  1,"sport shoes","50%OFF", 1000000, "پارچه مش", "ترموپلاستیک پلی اورتان (TPU)", "آج دار, انعطاف پذیر, قابلیت ارتجاعی, قابلیت گردش هوا, کاهش فشار وارده, مقاوم در برابر سایش, قابلیت جلوگیری از سرخوردن", "قابلیت ارتجاعی, ساده, قابلیت گردش هوا, طبی", "",
    {
        40: 1,
        41: 0,
        42:0,
        43:0,
        44:0,
    }
);
ShoeHandler.addData(shoe2);
let shoe3 = new Shoe (2, "کفش راحتی 361دجه مدل GTS22", "361 Degrees", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes3.jpeg", "آسیکس شاپ",  3,"sport shoes", "", 2000000, "پارچه مش", "ترموپلاستیک پلی اورتان (TPU)", "آج دار, انعطاف پذیر, قابلیت ارتجاعی, قابلیت گردش هوا, کاهش فشار وارده, مقاوم در برابر سایش, قابلیت جلوگیری از سرخوردن", "قابلیت ارتجاعی, ساده, قابلیت گردش هوا, طبی", "",
    {
        40: 0,
        41: 0,
        42:3,
        43:0,
        44:0
    }
);
ShoeHandler.addData(shoe3);
let shoe4 = new Shoe (3, "کفش راحتی نایکی مدل clifton8", "nike", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes4.jpeg","آیاک شوز", 10,"sport shoes", "25%OFF", 3000000, "الیاف مصنوعی میکرو پلی اورتان", "ترموپلاستیک پلی اورتان (TPU)", "انعطاف پذیر, کاهش فشار وارده", "ساده, قابل تعویض", "مقاوم در برابر سایش, قابلیت گردش هوا, قابلیت تطبیق با فرم پا", 
    {
        40: 3,
        41:2,
        42:4,
        43:1,
        44:0
    }
);
ShoeHandler.addData(shoe4);
let shoe5 = new Shoe (4, "کفش راحتی آی-رانر مدل kaha2", "I-RUNNER", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes5.jpeg","فروشگاه آسمان فارس", 6,"sport shoes", "10%OFF", 4000000, "الیاف مصنوعی میکرو پلی اورتان", "ترموپلاستیک پلی اورتان (TPU)", "انعطاف پذیر, کاهش فشار وارده", "ساده, قابل تعویض", "مقاوم در برابر سایش, قابلیت گردش هوا, قابلیت تطبیق با فرم پا", 
    {
        40: 3,
        41:1,
        42:1,
        43:1,
        44:0
    }
);
ShoeHandler.addData(shoe5);
let shoe6 = new Shoe (5, "کفش راحتی آل استار مدل k2", "All Star", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes6.jpeg","فروشگاه آسمان فارس", 9,"sport shoes", "10%OFF", 5000000, "الیاف مصنوعی میکرو پلی اورتان", "ترموپلاستیک پلی اورتان (TPU)", "انعطاف پذیر, کاهش فشار وارده", "ساده, قابل تعویض", "مقاوم در برابر سایش, قابلیت گردش هوا, قابلیت تطبیق با فرم پا", 
    {
        40: 3,
        41:3,
        42:2,
        43:1,
        44:0
    }
);
ShoeHandler.addData(shoe6);
let shoe7 = new Shoe (6, "کفش راحتی اسمارت مدل sh41", "Smart", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes7.jpeg","کفش مارکت سلطانی", 10,"sport shoes", "", 10000000, "الیاف مصنوعی میکرو پلی اورتان", "ترموپلاستیک پلی اورتان (TPU)", "انعطاف پذیر, کاهش فشار وارده", "ساده, قابل تعویض", "مقاوم در برابر سایش, قابلیت گردش هوا, قابلیت تطبیق با فرم پا", 
    {
        40: 3,
        41:3,
        42:2,
        43:2,
        44:0
    }
);
ShoeHandler.addData(shoe7);
let shoe8 = new Shoe (7, "کفش راحتی تیمبرلند مدل Superior",  "Timberland", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes8.jpeg","کفش مارکت سلطانی", 8,"sport shoes", "", 15000000, "الیاف مصنوعی میکرو پلی اورتان", "ترموپلاستیک پلی اورتان (TPU)", "انعطاف پذیر, کاهش فشار وارده", "ساده, قابل تعویض", "مقاوم در برابر سایش, قابلیت گردش هوا, قابلیت تطبیق با فرم پا", 
    {
        40: 1,
        41:3,
        42:2,
        43:2,
        44:0
    }
);
ShoeHandler.addData(shoe8);
let shoe9 = new Shoe (8, "کفش راحتی چرم آرا مدل Superior", "Charmara", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes9.jpeg","کفش مارکت سلطانی", 7,"sport shoes", "", 20000000, "الیاف مصنوعی میکرو پلی اورتان", "ترموپلاستیک پلی اورتان (TPU)", "انعطاف پذیر, کاهش فشار وارده", "ساده, قابل تعویض", "مقاوم در برابر سایش, قابلیت گردش هوا, قابلیت تطبیق با فرم پا", 
    {
        40: 0,
        41:3,
        42:2,
        43:2,
        44:0
    }
);
ShoeHandler.addData(shoe9);
let shoe10 = new Shoe (9, "کفش راحتی نایکی مدل Superior", "nike", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes10.jpeg","کفش مارکت سلطانی", 7,"sport shoes", "", 21000000, "الیاف مصنوعی میکرو پلی اورتان", "ترموپلاستیک پلی اورتان (TPU)", "انعطاف پذیر, کاهش فشار وارده", "ساده, قابل تعویض", "مقاوم در برابر سایش, قابلیت گردش هوا, قابلیت تطبیق با فرم پا", 
    {
        40: 0,
        41:3,
        42:2,
        43:2,
        44:0
    }
);
ShoeHandler.addData(shoe10);
let shoe11 = new Shoe (10, "کفش راحتی نایکی مدل Superior", "nike", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes11.jpeg","کفش مارکت سلطانی", 7,"sport shoes", "", 22000000, "الیاف مصنوعی میکرو پلی اورتان", "ترموپلاستیک پلی اورتان (TPU)", "انعطاف پذیر, کاهش فشار وارده", "ساده, قابل تعویض", "مقاوم در برابر سایش, قابلیت گردش هوا, قابلیت تطبیق با فرم پا", 
    {
        40: 0,
        41:3,
        42:2,
        43:2,
        44:0
    }
);
ShoeHandler.addData(shoe11);
let shoe12 = new Shoe (11, "کفش راحتی نایکی مدل Superior", "nike", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes12.jpeg","کفش مارکت سلطانی", 7,"sport shoes", "", 23000000, "الیاف مصنوعی میکرو پلی اورتان", "ترموپلاستیک پلی اورتان (TPU)", "انعطاف پذیر, کاهش فشار وارده", "ساده, قابل تعویض", "مقاوم در برابر سایش, قابلیت گردش هوا, قابلیت تطبیق با فرم پا", 
    {
        40: 0,
        41:3,
        42:2,
        43:2,
        44:0
    }
);
ShoeHandler.addData(shoe12);
let shoe13 = new Shoe (12, "کفش راحتی نایکی مدل Superior", "nike", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes13.jpeg","کفش مارکت سلطانی", 7,"sport shoes", "", 24000000, "الیاف مصنوعی میکرو پلی اورتان", "ترموپلاستیک پلی اورتان (TPU)", "انعطاف پذیر, کاهش فشار وارده", "ساده, قابل تعویض", "مقاوم در برابر سایش, قابلیت گردش هوا, قابلیت تطبیق با فرم پا", 
    {
        40: 0,
        41:3,
        42:2,
        43:2,
        44:0
    }
);
ShoeHandler.addData(shoe13);
let shoe14 = new Shoe (13, "کفش راحتی نایکی مدل Superior", "nike", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes14.jpeg","کفش مارکت سلطانی", 7,"sport shoes", "5%OFF", 25000000, "الیاف مصنوعی میکرو پلی اورتان", "ترموپلاستیک پلی اورتان (TPU)", "انعطاف پذیر, کاهش فشار وارده", "ساده, قابل تعویض", "مقاوم در برابر سایش, قابلیت گردش هوا, قابلیت تطبیق با فرم پا", 
    {
        40: 0,
        41:3,
        42:2,
        43:2,
        44:0
    }
);
ShoeHandler.addData(shoe14);
let shoe15 = new Shoe (14, "کفش راحتی نایکی مدل Superior", "nike", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes15.jpeg","کفش مارکت سلطانی", 7,"sport shoes", "", 6000000, "الیاف مصنوعی میکرو پلی اورتان", "ترموپلاستیک پلی اورتان (TPU)", "انعطاف پذیر, کاهش فشار وارده", "ساده, قابل تعویض", "مقاوم در برابر سایش, قابلیت گردش هوا, قابلیت تطبیق با فرم پا", 
    {
        40: 0,
        41:3,
        42:2,
        43:2,
        44:0
    }
);
ShoeHandler.addData(shoe15);
let shoe16 = new Shoe (15, "کفش  مدل دیاموند رنگ زیتونی", "Charmara", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes16.png","فروشگاه آسمان فارس", 7,"casual shoes", "", 6000000, "چرم مصنوعی", "پلی اورتان", "انعطاف پذیر, کاهش فشار وارده", "ساده, قابل تعویض", "مقاوم در برابر سایش, قابلیت تطبیق با فرم پا", 
    {
        40: 0,
        41:3,
        42:2,
        43:2,
        44:0
    }
);
ShoeHandler.addData(shoe16);
let shoe17 = new Shoe (16, "دمپایی مردانه مدل b_12", "361 Degrees", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes17.png","فروشگاه آسمان فارس", 7,"Slippers", "10%OFF", 1000000, "چرم مصنوعی", "", "", "", "", 
    {
        40: 0,
        41:3,
        42:2,
        43:2,
        44:0
    }
);
ShoeHandler.addData(shoe17);
let shoe18 = new Shoe (17, "کفش زنانه مدل موشا", "Timberland", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes18.png","آیاک شوز", 7,"formal shoes", "5%OFF", 5000000, "چرم مصنوعی", "پلی اورتان", "", "ساده, قابل تعویض", "", 
    {
        40: 0,
        41:3,
        42:2,
        43:2,
        44:0
    }
);
ShoeHandler.addData(shoe18);
let shoe19 = new Shoe (18, "کفش مدل آنیس تابستانی چرم رنگ سفید", "Smart", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes19.png","آسیکس شاپ", 7,"casual shoes", "", 5000000, "چرم مصنوعی", "پلی اورتان", "", "ساده, قابل تعویض", "", 
    {
        40: 0,
        41:3,
        42:2,
        43:2,
        44:0
    }
);
ShoeHandler.addData(shoe19);
let shoe20 = new Shoe (19, "کفش مدل آنیس تابستانی چرم رنگ سفید", "All Star", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes20.png","آسیکس شاپ", 7,"formal shoes", "", 10000000, "چرم طبیعی", "پلی اورتان", "", "ساده, قابل تعویض", "", 
    {
        40: 0,
        41:3,
        42:2,
        43:2,
        44:0
    }
);
ShoeHandler.addData(shoe20);
let shoe21 = new Shoe (20, "بوت زنانه چرم مشهد مدل J2524-034", "I-RUNNER", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes21.png","آیاک شوز", 7,"boots", "", 12000000, "چرم طبیعی", "پلی اورتان", "", "ساده, قابل تعویض", "", 
    {
        40: 0,
        41:3,
        42:2,
        43:2,
        44:0
    }
);
ShoeHandler.addData(shoe21);
let shoe22 = new Shoe (21, "بوت کرمانی مدل چرم دستدوز", "Puma", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes22.png","آیاک شوز", 7,"boots", "10%OFF", 15000000, "چرم طبیعی", "پلی اورتان", "", "ساده, قابل تعویض", "", 
    {
        40: 0,
        41:3,
        42:2,
        43:2,
        44:0
    }
);
ShoeHandler.addData(shoe22);
let shoe23 = new Shoe (22, "نیم بوت زنانه چرم مشهد مدل", "Adidas", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes23.png","آیاک شوز", 7,"ankle-b", "", 17000000, "چرم طبیعی", "پلی اورتان", "", "ساده, قابل تعویض", "", 
    {
        40: 0,
        41:3,
        42:2,
        43:2,
        44:0
    }
);
ShoeHandler.addData(shoe23);
let shoe24 = new Shoe (23, "نیم بوت مردانه مدل اسپانیا رنگ مشکی", "Smart", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes24.png","آیاک شوز", 7,"ankle-b", "", 19000000, "چرم طبیعی", "پلی اورتان", "", "ساده, قابل تعویض", "", 
    {
        40: 0,
        41:3,
        42:2,
        43:2,
        44:0
    }
);
ShoeHandler.addData(shoe24);
let shoe25 = new Shoe (24, "دمپایی پسرانه پایون", "Puma", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes25.png", "آسیکس شاپ", 5, "Baby shoes", "10%OFF", 125000, "الیاف مصنوعی میکرو پلی اورتان", "ترموپلاستیک پلی اورتان (TPU)", "انعطاف پذیر, کاهش فشار وارده", "", "", 
    {
        25:0,
        28:2,
        31:1,
        32:2
    }
);
ShoeHandler.addData(shoe25);
let shoe26 = new Shoe (25, "بوت دخترانه مدل ستاره شب شیشه ای", "Smart", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes26.png", "فروشگاه آسمان فارس", 6, "Baby shoes", "", 339700, "پلی اورتان", "", "", "", "", 
    {
        25:1,
        28:2,
        31:1,
        32:2
    }
);
ShoeHandler.addData(shoe26);
let shoe27 = new Shoe (26, "دمپایی دخترانه نیکتا مدل خرسی", "Adidas", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes27.png", "کفش مارکت سلطانی", 6, "Baby shoes", "", 149000, "پلی اورتان", "", "", "", "", 
    {
        25:1,
        28:2,
        31:1,
        32:2
    }
);
ShoeHandler.addData(shoe27);
let shoe28 = new Shoe (27, "کفش راحتی کروماکی", "I-RUNNER", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes28.png", "آیاک شوز", 4, "Baby shoes", "15%OFF", 149000, "چرم مصنوعی", "پلی اورتان", "", "ساده, قابل تعویض", "",  
    {
        25:1,
        28:1,
        31:1,
        32:1
    }
);
ShoeHandler.addData(shoe28);
let shoe29 = new Shoe (28, "کفش طبی مردانه کفش کوروش", "All Star", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes29.png", "کفش مارکت سلطانی", 4, "Orthopedic Shoe", "25%OFF", 1360000, "چرم طبیعی", "پلی اورتان", "", "ساده, قابل تعویض", "",  
    {
        25:1,
        28:1,
        31:1,
        32:1
    }
);
ShoeHandler.addData(shoe29);
let shoe30 = new Shoe (29, "کفش طبی زنانه چرم عطارد", "Timberland", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes30.png", "آیاک شوز", 5, "Orthopedic Shoe", "20%OFF", 1946700, "چرم طبیعی", "پلی اورتان", "", "ساده, قابل تعویض", "",  
    {
        25:2,
        28:1,
        31:1,
        32:1
    }
);
ShoeHandler.addData(shoe30);
let shoe31 = new Shoe (30, "دمپایی زنانه مدل دوبنده میترا", "361 Degrees", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes31.png", "فروشگاه آسمان فارس", 7, "Spring special", "", 123000, "پلی اورتان", "", "", "", "",   
    {
        25:2,
        28:2,
        31:2,
        32:1
    }
);
ShoeHandler.addData(shoe31);
let shoe32 = new Shoe (31, "صندل مردانه سهند", "Charmara", "http://127.0.0.1:5500/holosen/HTML/session7/zizi Shoe stores/src/img/shoes32.png", "آسیکس شاپ", 7, "Spring special", "20%OFF", 396000, "جیر مصنوعی", "", "", "", "",   
    {
        25:2,
        28:2,
        31:2,
        32:1
    }
);
ShoeHandler.addData(shoe32);

document.getElementById("inter").addEventListener("click", function () {
    let searchTitle = document.getElementById("search-title").value;
    searchKey.title = searchTitle || "";
    applyFilters();
})

let searchKey = {
    brand: [],
    shoeType: "",
    auction:false,
    minPrice: null,
    maxPrice: null,
    WarehouseInventory: undefined
};

localStorage.setItem('stored', JSON.stringify(ShoeHandler.getDataList()));
let storedShoes = JSON.parse(localStorage.getItem('stored')) || [];

// نمایش داده‌ها در صفحه
function fillData(dataList) {
    let template = `
    <a href="#" class="shoe-item" data-id="__ID__">
        <div class="ads-item">
            <div class="ads-item-info">
                <h3 style="text-decoration: none;">__TITLE__</h3>
                <h4 style="float: left;color:red;">__AUCTION__</h4>
                <div class="ads-bottom-info">
                    <b>__PRICE__ تومان</b>
                    <br>
                    <span>__AGENCY__</span>
                </div>
            </div>
            <div class="ads-item-image">
                <img src="__IMG__" alt="image" width="" class="shoe-image">
            </div>
        </div>
    </a>
    `;
    let holder = document.getElementById("container-Shoes");
    holder.innerHTML = "";
    dataList.forEach((item) => {
        let currentItemTemplate = template;
        currentItemTemplate = currentItemTemplate.replace("__ID__", item.id);
        currentItemTemplate = currentItemTemplate.replace("__TITLE__", item.title);
        currentItemTemplate = currentItemTemplate.replace("__AUCTION__", item.auction);
        currentItemTemplate = currentItemTemplate.replace("__PRICE__", item.price);
        currentItemTemplate = currentItemTemplate.replace("__AGENCY__", item.agency);
        currentItemTemplate = currentItemTemplate.replace("__IMG__", item.img);
        let newShoe = document.createElement("div");
        newShoe.className = "shoe";
        newShoe.innerHTML = currentItemTemplate;
        holder.appendChild(newShoe);
    });

    refreshstored = JSON.parse(localStorage.getItem('stored')) || [];

    document.querySelectorAll('.shoe-item').forEach(itemElement => {
        itemElement.addEventListener('click', function(event) {
            event.preventDefault();
            let itemId = this.dataset.id;
            let selectedItem = refreshstored.find(shoe => shoe.id == itemId);
            choose(selectedItem);
        });
    });
}

// فراخوانی تابع fillData برای نمایش اولیه داده‌ها
fillData(storedShoes);

function applyFilters() {
    let result = [...storedShoes];
    if (searchKey.title) {
        result = result.filter(item => item.title.toLowerCase().includes(searchKey.title.toLowerCase()));
    }

    if (searchKey.brand.length > 0) {
        result = result.filter(item => searchKey.brand.includes(item.brand.toLowerCase()));
    }

    if (searchKey.shoeType) {
        result = result.filter(item => item.shoeType.toLowerCase() === searchKey.shoeType.toLowerCase());
    }

    if (searchKey.auction) {
        result = result.filter(item => item.auction != "");
    }
    

    if (searchKey.minPrice !== null) {
        result = result.filter(item => item.price >= searchKey.minPrice);
    }

    if (searchKey.maxPrice !== null) {
        result = result.filter(item => item.price <= searchKey.maxPrice);
    }

    if (searchKey.WarehouseInventory !== undefined) {
        result = result.filter(item => item.WarehouseInventory >= searchKey.WarehouseInventory);
    }

    fillData(result);
}

function changeFilter(ele, filterKey, value) {
    if (filterKey === 'brand') {
        let brandValue = value.toLowerCase();
        if (ele.checked) {
            searchKey.brand.push(brandValue);
        } else {
            searchKey.brand = searchKey.brand.filter(b => b !== brandValue);
        }
    } else if (filterKey === 'shoeType') {
        searchKey.shoeType = searchKey.shoeType === value ? "" : value;
    } else if (filterKey === 'auction') {
        searchKey.auction = !searchKey.auction; // فیلتر را ثابت نگه می‌دارد
    }
    applyFilters();
}

document.getElementById("min-thumb").addEventListener("mouseup", function() {
    let minvalue = document.getElementById("min-price");
    searchKey.minPrice = parseFloat(minvalue.value) || null;
    applyFilters();
});

document.getElementById("max-thumb").addEventListener("mouseup", function() {
    let maxvalue = document.getElementById("max-price");
    searchKey.maxPrice = parseFloat(maxvalue.value) || null;
    applyFilters();
});

document.getElementById("Available-Products").addEventListener("change", function() {
    searchKey.WarehouseInventory = this.checked ? 1 : undefined;
    applyFilters();
});

function resetData() {
    searchKey = {
        brand: [],
        shoeType: "",
        auction:false,
        minPrice: null,
        maxPrice: null,
        WarehouseInventory: undefined
    };
    fillData(storedShoes);
}



